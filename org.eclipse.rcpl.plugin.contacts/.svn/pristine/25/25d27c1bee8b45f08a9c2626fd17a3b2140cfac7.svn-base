package org.eclipse.rcpl.handlers;

import org.eclipse.e4.core.di.annotations.Execute;
import org.eclipse.emf.common.command.Command;
import org.eclipse.emf.edit.command.AddCommand;
import org.eclipse.rcpl.client.uc.UCContactsPlugin;
import org.eclipse.rcpl.model_1_0_0.jo.EContactGroup;
import org.eclipse.rcpl.model_1_0_0.jo.JoFactory;
import org.eclipse.rcpl.model_1_0_0.jo.JoPackage;

public class AddGroupHandler {

	private Object selectedItem;

	@Execute
	public void execute() {
		if (selectedItem instanceof EContactGroup) {
			EContactGroup group = (EContactGroup) selectedItem;
			EContactGroup newGroup = JoFactory.eINSTANCE.createEContactGroup();
			newGroup.setId("New Group");
			// EContactGroup rootGroup = JO.session.getJoffice().getContacts();
			Command command = AddCommand.create(
					UCContactsPlugin.getEditingDomain(), group,
					JoPackage.Literals.ECONTACT_GROUP, newGroup);
			if (command != null && command.canExecute())
				UCContactsPlugin.getEditingDomain().getCommandStack()
						.execute(command);
		}
	}

	public Object getSelectedItem() {
		return selectedItem;
	}

	public void setSelectedItem(Object selectedItem) {
		this.selectedItem = selectedItem;
	}
}
